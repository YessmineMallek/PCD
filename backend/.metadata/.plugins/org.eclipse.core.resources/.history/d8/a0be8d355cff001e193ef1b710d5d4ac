FROM eclipse-temurin:17-jdk-alpine
COPY target/*.jar trainTruck.jar
ENTRYPOINT ["java","-jar","trainTruck.jar"]



COPY db.dump /docker-entrypoint-initdb.d/db.dump

# Install PostgreSQL client tools
RUN apt-get update && apt-get install -y python-pip libgeos-c1

RUN service postgresql start
RUN su postgres bash -c "psql -U postgres -d GTFS_Base -f /docker-entrypoint-initdb.d/db.dump" 


# Run the dump file to restore the database
RUN ["psql", "-U", "postgres", "-d", "GTFS_Base", "-f", "/docker-entrypoint-initdb.d/db.dump"]


