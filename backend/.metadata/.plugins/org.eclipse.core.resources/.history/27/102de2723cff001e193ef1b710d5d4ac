FROM eclipse-temurin:17-jdk-alpine
COPY target/*.jar trainTruck.jar
ENTRYPOINT ["java","-jar","trainTruck.jar"]


COPY db.dump /docker-entrypoint-initdb.d/db.dump

# Install PostgreSQL client tools
RUN apk update && \
    apk add --no-cache postgresql-client && \
    psql -U postgres -d mydatabase -f /docker-entrypoint-initdb.d/db.dump

# Run the dump file to restore the database
RUN ["psql", "-U", "postgres", "-d", "GTFS_Base", "-f", "/docker-entrypoint-initdb.d/db.dump"]


